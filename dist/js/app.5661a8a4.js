(function(e){function t(t){for(var o,u,c=t[0],i=t[1],s=t[2],l=0,d=[];l<c.length;l++)u=c[l],Object.prototype.hasOwnProperty.call(r,u)&&r[u]&&d.push(r[u][0]),r[u]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);f&&f(t);while(d.length)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},a=[];function u(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"969be974","chunk-2d0c4643":"d894b9cb","chunk-c5c5dd3a":"da7d584c","chunk-2d0af8f8":"ac59b3a8","chunk-2d230e44":"2b151ad7"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=u(e);var s=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}r[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var f=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("5f5b"),a=n("b1e0"),u=n("1dce"),c=n.n(u),i=n("bc3a"),s=n.n(i),l=n("a7fe"),f=n.n(l),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),n("b-container",[n("router-view")],1)],1)},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-container",[n("b-navbar-brand",{on:{click:function(t){return e.$router.push({name:"Home"})}}},[e._v("Jkdev.cn")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[e.userInfo?n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.userInfo.name))])]},proxy:!0}],null,!1,2640023467)},[n("b-dropdown-item",{on:{click:function(t){return e.$router.push({name:"profile"})}}},[e._v("个人主页")]),n("b-dropdown-item",{on:{click:e.logout}},[e._v("退出")])],1):e._e(),e.userInfo?e._e():n("div",["login"!=e.$route.name?n("b-nav-item",{on:{click:function(t){return e.$router.replace({name:"login"})}}},[e._v("登录")]):e._e(),"register"!=e.$route.name?n("b-nav-item",{on:{click:function(t){return e.$router.replace({name:"register"})}}},[e._v("注册")]):e._e()],1)],1)],1)],1)],1)],1)},b=[],h=n("2f62"),v={computed:Object(h["c"])({userInfo:function(e){return e.userModule.userInfo}}),methods:Object(h["b"])("userModule",["logout"])},g=v,_=n("2877"),E=Object(_["a"])(g,m,b,!1,null,"0d66e070",null),O=E.exports,S={components:{Navbar:O},data:function(){return{}}},w=S,k=Object(_["a"])(w,d,p,!1,null,null,null),y=k.exports,N=(n("99af"),n("d3b7"),n("2909")),T=n("8c4f"),j=(n("b0c0"),"jkdev_"),I="".concat(j,"user_"),U="".concat(I,"token"),R="".concat(I,"info"),P=function(e,t){localStorage.setItem(e,t)},$=function(e){return localStorage.getItem(e)},x={set:P,get:$,USER_TOKEN:U,USER_INFO:R},M=s.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL,timeout:5e3});M.interceptors.request.use((function(e){return Object.assign(e.headers,{Authorization:"Bearer ".concat(x.get(x.USER_TOKEN))}),e}),(function(e){return Promise.reject(e)}));var F=M,K=function(e){var t=e.name,n=e.telephone,o=e.password;return F.post("auth/register",{name:t,telephone:n,password:o})},A=function(e){var t=e.telephone,n=e.password;return F.post("auth/login",{telephone:t,password:n})},H=function(){return F.get("auth/info")},J={register:K,login:A,info:H},L={namespaced:!0,state:{token:x.get(x.USER_TOKEN),userInfo:x.get(x.USER_INFO)?JSON.parse(x.get(x.USER_INFO)):null},mutations:{SET_TOKEN:function(e,t){x.set(x.USER_TOKEN,t),e.token=t},SET_USERINFO:function(e,t){x.set(x.USER_INFO,JSON.stringify(t)),e.userInfo=t}},actions:{register:function(e,t){var n=t.name,o=t.telephone,r=t.password;return new Promise((function(t,a){J.register({name:n,telephone:o,password:r}).then((function(t){return e.commit("SET_TOKEN",t.data.data.token),J.info()})).then((function(n){e.commit("SET_USERINFO",n.data.data.user),t(n)})).catch((function(e){a(e)}))}))},login:function(e,t){var n=t.telephone,o=t.password;return new Promise((function(t,r){J.login({telephone:n,password:o}).then((function(t){return e.commit("SET_TOKEN",t.data.data.token),J.info()})).then((function(n){e.commit("SET_USERINFO",n.data.data.user),t(n)})).catch((function(e){r(e)}))}))},logout:function(e){e.commit("SET_TOKEN",""),x.set(x.USER_TOKEN,""),e.commit("SET_USERINFO",""),x.set(x.USER_INFO,""),window.location.reload()}}},C=L;o["default"].use(h["a"]);var B=new h["a"].Store({strict:!1,state:{},mutations:{},actions:{},modules:{userModule:C}}),q=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},V=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",[n("h1",[e._v("MY HOME")])])])}],z={name:"Home",components:{}},D=z,Y=Object(_["a"])(D,q,V,!1,null,null,null),G=Y.exports,Q=[{path:"/register",name:"register",component:function(){return Promise.all([n.e("chunk-c5c5dd3a"),n.e("chunk-2d0af8f8")]).then(n.bind(null,"0f9e"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-c5c5dd3a"),n.e("chunk-2d230e44")]).then(n.bind(null,"ede4"))}},{path:"/profile",name:"profile",meta:{auth:!0},component:function(){return n.e("chunk-2d0c4643").then(n.bind(null,"3b42"))}}],W=Q;o["default"].use(T["a"]);var X=[{path:"/Home",name:"Home",component:G},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}].concat(Object(N["a"])(W)),Z=new T["a"]({mode:"history",base:"/",routes:X});Z.beforeEach((function(e,t,n){e.meta.auth?B.state.userModule.token?n():Z.push({name:"login"}):n()}));var ee=Z;n("a41b");o["default"].config.productionTip=!1,o["default"].use(r["a"]),o["default"].use(a["a"]),o["default"].use(c.a),o["default"].use(f.a,s.a),new o["default"]({router:ee,store:B,render:function(e){return e(y)}}).$mount("#app")},a41b:function(e,t,n){}});
//# sourceMappingURL=app.5661a8a4.js.map